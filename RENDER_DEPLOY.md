# Деплой на Render.com

## Шаг 1: Подготовка на Render.com

1. Создайте аккаунт на [Render.com](https://render.com)
2. Нажмите "New" → "Web Service"
3. Подключите ваш GitHub репозиторий

## Шаг 2: Настройка переменных окружения

В настройках сервиса на Render.com добавьте следующие переменные окружения:

### Обязательные переменные:

1. **DATABASE_URL** - URL вашей PostgreSQL базы данных
   - Формат: `postgresql://user:password@host:port/database`
   - Пример: `postgresql://user:pass@db.example.com:5432/mydb`

2. **OPENAI_API_KEY** - Ваш API ключ OpenAI
   - Получите на [platform.openai.com](https://platform.openai.com/api-keys)

3. **NODE_ENV** - Уже настроено в `render.yaml` как `production`

4. **PORT** - Уже настроено в `render.yaml` как `10000` (Render автоматически присваивает порт)

## Шаг 3: Создание PostgreSQL базы данных (если еще нет)

1. На Render.com создайте новую PostgreSQL базу данных:
   - "New" → "PostgreSQL"
   - Выберите план (Starter подойдет для начала)
   - Скопируйте **Internal Database URL**

2. Добавьте этот URL в переменные окружения сервиса как `DATABASE_URL`

## Шаг 4: Деплой

1. После подключения репозитория Render автоматически определит настройки из `render.yaml`
2. Нажмите "Create Web Service"
3. Render автоматически:
   - Установит зависимости (`npm install`)
   - Соберет фронтенд (`npm run build`)
   - Запустит сервер (`npm start`)

## Шаг 5: Проверка

После успешного деплоя:

1. Проверьте логи в разделе "Logs"
2. Откройте ваш сайт по URL, который предоставит Render
3. Проверьте работу API: `https://your-app.onrender.com/api/reports`

## Важные замечания

- **Free план**: Render засыпает сервисы после 15 минут бездействия. Первый запрос может быть медленным (холодный старт).
- **База данных**: Используйте Internal Database URL для лучшей производительности
- **Логи**: Проверяйте логи при проблемах - там будет видна вся диагностика

## Структура проекта

- Фронтенд собирается в `dist/` директорию
- Сервер в `server/index.js` отдает статические файлы в production
- API работает на том же домене

## Поддержка

Если возникнут проблемы:
1. Проверьте логи на Render.com
2. Убедитесь что все переменные окружения установлены
3. Проверьте что DATABASE_URL правильно настроен

